<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>YES IT'S ME</title>
  <style>
    :root{ --bg:#071738; --fg:#fff; --muted:#c7d2fe; --brand:#2144ff; --panel:#0b204a; --border:#132a63; }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,sans-serif}
    .wrap{max-width:780px;margin:40px auto;padding:0 16px;text-align:center}
    h1{font-size:56px;letter-spacing:1.5px;margin:0 0 24px;font-style:italic;font-weight:800}
    .hint{color:var(--muted);font-size:13px;margin-bottom:18px}
    .row{display:flex;gap:12px;justify-content:center;align-items:center;flex-wrap:wrap;margin-bottom:12px}
    .btn{appearance:none;border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700}
    .btn.primary{background:var(--brand);color:#fff}
    .btn.dark{background:#0f1f49;color:#fff}
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .file-label{border:1px solid var(--border);background:#0f1f49;color:#fff;border-radius:10px;padding:8px 12px;cursor:pointer;font-weight:700}
    #wave{height:110px;margin:12px 0;border-radius:10px;overflow:hidden;background:var(--panel);border:1px solid var(--border)}
    #spec{height:180px;margin:0 0 16px;border-radius:10px;overflow:hidden;background:#040e26;border:1px solid var(--border)}
    /* оставляем цветную спектрограмму */
    #spec canvas{filter:grayscale(0)}
    .analyze{width:340px;margin:18px auto 8px;border-radius:12px}
    .meter{height:18px;font-size:12px;color:var(--muted);margin:6px 0 18px}
    .result{max-width:560px;margin:16px auto;text-align:left;border:1px solid var(--border);border-radius:12px;padding:14px;background:var(--panel)}
    .kv{display:flex;justify-content:space-between;margin:4px 0}
    details summary{cursor:pointer;user-select:none}
    .hidden{display:none}
    input[type=file]{display:none}
    pre{color:#dbeafe}
  </style>
  <script src="https://unpkg.com/wavesurfer.js@7/dist/wavesurfer.min.js"></script>
  <script src="https://unpkg.com/wavesurfer.js@7/dist/plugins/spectrogram.min.js"></script>
</head>
<body>
  <div class="wrap">
    <h1>YES IT'S ME</h1>
    <div class="hint">PLEASE UPLOAD SHORT CLIP (&lt; 15 s / &lt; 5 MB).</div>

    <div class="row">
      <label class="file-label" id="fileLabel">
        Load audio file
        <input id="file" type="file" accept="audio/*" />
      </label>

      <button id="recBtn" class="btn dark">● REC</button>
      <button id="playBtn" class="btn dark" disabled>▶︎ Play</button>
      <span id="timer" style="color:var(--muted);font-size:12px">00:00</span>
      <span id="fileMeta" style="color:var(--muted);font-size:12px"></span>
    </div>

    <div id="wave"></div>
    <div id="spec"></div>

    <button id="analyzeBtn" class="btn primary analyze" disabled>Analyze</button>
    <div id="meter" class="meter">Inference Time : ms</div>

    <div id="result" class="result hidden">
      <div class="kv"><strong>Verdict</strong><span id="verdict">-</span></div>
      <div class="kv"><strong>Confidence</strong><span id="conf">-</span></div>
      <div class="kv"><strong>Status</strong><span id="status">-</span></div>
      <div class="kv"><strong>Request ID</strong><span id="rid">-</span></div>
      <details style="margin-top:8px">
        <summary>Raw JSON</summary>
        <pre id="raw" style="white-space:pre-wrap;font-size:12px;background:#08183a;border:1px solid var(--border);padding:8px;border-radius:8px;max-height:280px;overflow:auto"></pre>
      </details>
    </div>
  </div>

  <!-- cache-bust -->
  <script src="./app.js?v=20251021-08"></script>
</body>
</html>